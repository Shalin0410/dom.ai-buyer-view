// src/knowledge/buyer-docs.ts
// Buyer-focused home buying knowledge base

export type Doc = { title: string; content: string };

// Buyer education content - focused on home buying process and guidance
export const buyerDocs: Doc[] = [
  {
    title: 'Home Buying Process Guide',
    content: `# Complete Home Buying Process Guide

## Overview
Buying a home is one of the biggest financial decisions you'll make. This guide walks you through each step to help you navigate the process with confidence.

## Step 1: Financial Preparation (2-4 weeks)

### Get Pre-approved for a Mortgage
- **Why it matters**: Shows sellers you're serious and gives you a clear budget
- **What you need**: Income verification, tax returns, bank statements, credit report
- **Tip**: Shop around with 3-5 lenders to compare rates and terms

### Determine Your Budget
- **Down payment**: Typically 3-20% of home price
- **Monthly payment**: Should be no more than 28% of gross monthly income
- **Additional costs**: Property taxes, insurance, HOA fees, maintenance

### Save for Closing Costs
- **Amount**: Usually 2-5% of home price
- **Includes**: Loan origination fees, appraisal, title insurance, inspections
- **Tip**: Ask your lender for a Loan Estimate to understand all costs

## Step 2: Find a Real Estate Agent (1-2 weeks)

### What to Look For
- Local market expertise
- Good communication style
- Proven track record
- Proper licensing and credentials

### Questions to Ask
- How many buyers have you represented this year?
- What's your average time to find a home for buyers?
- Can you provide references from recent clients?
- How will you help me negotiate the best deal?

## Step 3: House Hunting (4-12 weeks)

### Define Your Criteria
- **Must-haves**: Number of bedrooms/bathrooms, location, school district
- **Nice-to-haves**: Garage, yard, updated kitchen, etc.
- **Deal-breakers**: Busy roads, no parking, poor condition

### Property Viewing Tips
- Visit at different times (weekday/weekend, day/evening)
- Check water pressure, electrical outlets, cell phone reception
- Look for signs of water damage, foundation issues, or needed repairs
- Consider the neighborhood: noise levels, parking, amenities

## Step 4: Making an Offer (1-3 days)

### Offer Components
- **Purchase price**: Based on comparable sales and market conditions
- **Earnest money**: Usually 1-3% of offer price to show good faith
- **Contingencies**: Inspection, appraisal, financing, sale of current home
- **Timeline**: Closing date, inspection periods, response deadlines

### Negotiation Strategy
- Research recent comparable sales
- Consider market conditions (buyer's vs seller's market)
- Be prepared for counteroffers
- Know your walk-away point

## Step 5: Under Contract (30-45 days)

### Home Inspection (5-10 days after offer acceptance)
- **What it covers**: Structure, electrical, plumbing, HVAC, roof
- **Your role**: Attend the inspection, ask questions
- **Next steps**: Review report, negotiate repairs or credits if needed

### Appraisal (2-3 weeks after offer acceptance)
- **Purpose**: Lender ensures home value supports loan amount
- **If low**: Renegotiate price, pay difference, or walk away
- **Your role**: Ensure appraiser has access to property

### Final Loan Approval
- **What happens**: Lender reviews all documentation and appraisal
- **Your role**: Provide any additional requested documents promptly
- **Timeline**: Usually completed 1-2 weeks before closing

## Step 6: Closing Process (Final 1-2 weeks)

### Final Walkthrough (24-48 hours before closing)
- Verify agreed-upon repairs were completed
- Check that all systems work properly
- Ensure property is in expected condition
- Confirm all agreed-upon items are still present

### Closing Day
- **Duration**: Usually 1-2 hours
- **What you'll sign**: Loan documents, deed, title insurance
- **What you'll receive**: Keys, garage door openers, warranties
- **What to bring**: Photo ID, certified funds for closing costs

## Timeline Summary
- **Financial prep**: 2-4 weeks
- **Agent selection**: 1-2 weeks  
- **House hunting**: 4-12 weeks
- **Offer to contract**: 1-3 days
- **Under contract to closing**: 30-45 days
- **Total timeline**: 3-6 months

## Red Flags to Watch For
- Pressure to skip inspections or appraisals
- Reluctance to provide required disclosures
- Significant price reductions or long time on market without explanation
- Foundation cracks, water damage, or electrical issues
- Neighborhood with many foreclosures or short sales`
  },
  {
    title: 'Understanding Real Estate Timelines',
    content: `# Real Estate Transaction Timelines Explained

## Pre-Escrow Phase: Getting Ready to Buy

### Initial Consultation & Needs Assessment
- **Duration**: 1-2 meetings
- **What happens**: Discuss your needs, budget, timeline, and preferences
- **Your role**: Be honest about finances, must-haves, and concerns
- **Outcome**: Clear understanding of your home buying goals

### Financial Preparation & Pre-approval
- **Duration**: 2-4 weeks
- **What happens**: Get pre-approved for mortgage, organize finances
- **Documents needed**: Pay stubs, tax returns, bank statements, debt information
- **Outcome**: Pre-approval letter showing how much you can borrow

### Search Strategy & Market Education
- **Duration**: 1-2 weeks
- **What happens**: Learn about neighborhoods, set up property alerts
- **Your role**: Research areas, drive neighborhoods, attend open houses
- **Outcome**: Refined search criteria and market knowledge

### Property Tours & Education
- **Duration**: 4-12 weeks (varies by market and preferences)
- **What happens**: View properties, learn to evaluate homes
- **Tips**: Take notes, photos (with permission), ask lots of questions
- **Outcome**: Understanding of what's available in your price range

### Review Disclosures & Market Reports
- **Duration**: Ongoing during search
- **What happens**: Learn to read property disclosures and market data
- **Important**: Understand property condition, neighborhood trends
- **Outcome**: Ability to make informed decisions

### Offer Strategy & Submission
- **Duration**: 1-3 days per property
- **What happens**: Determine offer price and terms, submit offer
- **Key factors**: Market conditions, property condition, your motivation
- **Outcome**: Accepted offer and signed purchase agreement

## Escrow Phase: From Contract to Keys

### Open Escrow (Days 1-3)
- **What happens**: Title company opens escrow, orders title report
- **Your tasks**: Submit earnest money deposit, sign disclosures
- **Timeline**: Usually completed within 1-3 business days
- **Important**: Review all contract terms carefully

### Earnest Money Deposit (Days 1-3)
- **Amount**: Typically 1-3% of purchase price
- **Purpose**: Shows good faith commitment to purchase
- **Protection**: Held in escrow account, refundable under certain conditions
- **Timeline**: Due within 3 days of accepted offer

### Home Inspection (Days 5-10)
- **Duration**: 2-4 hours for inspection, 5-10 days for entire process
- **What's checked**: Structure, electrical, plumbing, HVAC, appliances
- **Your role**: Attend inspection, ask questions, review report
- **Next steps**: Request repairs, credits, or price reduction if needed

### Appraisal Process (Days 10-21)
- **Purpose**: Lender confirms home value supports loan amount
- **Duration**: 1-2 weeks from order to completion
- **Your role**: Ensure appraiser has access to property
- **Potential issues**: Low appraisal may require renegotiation

### Loan Processing & Underwriting (Days 1-30)
- **What happens**: Lender reviews all documentation for final approval
- **Your role**: Provide requested documents quickly and accurately
- **Common requests**: Updated pay stubs, bank statements, explanations
- **Timeline**: Ongoing throughout escrow period

### Final Walkthrough (Days 28-30)
- **When**: 24-48 hours before closing
- **Purpose**: Verify property condition and completed repairs
- **What to check**: All systems work, agreed repairs done, property clean
- **Issues**: Address any problems before closing

### Closing & Funding (Day 30-45)
- **Duration**: 1-2 hours for signing
- **What you sign**: Loan documents, deed, title insurance, disclosures
- **Final costs**: Bring certified funds for remaining down payment and closing costs
- **Completion**: Receive keys and officially become homeowner

## Key Milestones & Deadlines

### Critical Dates
- **Inspection contingency**: Usually 7-10 days
- **Appraisal contingency**: Usually 17-21 days  
- **Loan contingency**: Usually 21-30 days
- **Closing date**: Typically 30-45 days from acceptance

### What Can Extend Timelines
- Inspection issues requiring negotiation
- Appraisal delays or low valuation
- Loan processing complications
- Title issues or liens
- Seller delays or complications

## Communication Expectations

### Your Agent Will Update You On
- Showing feedback and market activity
- Offer status and negotiations
- Inspection and appraisal results
- Loan progress and requirements
- Timeline changes or issues

### You Should Communicate
- Changes in financial situation
- Timeline constraints or preferences  
- Concerns about property or process
- Questions about next steps
- Any issues that arise

## Tips for Staying on Track
1. **Respond quickly** to requests for information or decisions
2. **Keep documents organized** and easily accessible
3. **Maintain open communication** with your agent and lender
4. **Don't make major financial changes** during the process
5. **Stay flexible** as some delays are normal and expected`
  }
];

// Runtime-injectable knowledge (e.g., Notion MCP content)
const injectedDocs: Doc[] = [];

export const addInjectedDoc = (title: string, content: string) => {
  // Only allow injection of home buying related content
  if (title.toLowerCase().includes('make home buying transparent') || 
      title.toLowerCase().includes('home buying') || 
      title.toLowerCase().includes('buyer') ||
      title.toLowerCase().includes('real estate')) {
    injectedDocs.push({ title, content });
  }
};

export const getAllDocs = (): Doc[] => [...buyerDocs, ...injectedDocs];
